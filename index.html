<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zinzino – Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
  <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.min.js"></script>
  <!-- Script do LiveChat -->
  <script>
    window.__lc = window.__lc || {};
    window.__lc.license = 19293268; // Substitua pelo número de licença correto
    ;(function(n,t,c){function i(n){return e._h?e._h.apply(null,n):e._q.push(n)}var e={_q:[],_h:null,_v:"2.0",on:function(){i(["on",c.call(arguments)])},once:function(){i(["once",c.call(arguments)])},off:function(){i(["off",c.call(arguments)])},get:function(){if(!e._h)throw new Error("[LiveChatWidget] You can't use getters before load.");return i(["get",c.call(arguments)])},call:function(){i(["call",c.call(arguments)])},init:function(){var n=t.createElement("script");n.async=!0,n.type="text/javascript",n.src="https://cdn.livechatinc.com/tracking.js",t.head.appendChild(n)}};!n.__lc.asyncInit&&e.init(),n.LiveChatWidget=n.LiveChatWidget||e}(window,document,[].slice))
  </script>
  <style>
    :root {
      --brand-gradient: linear-gradient(135deg, #8e2de2, #4a00e0);
      --text: #fff;
      --overlay: rgba(0,0,0,.22);
      --maxw: 1100px;
      --sidebar-w: 260px;
      --btn-size: 40px;
      --anim-time: 320ms;
      --anim-ease: cubic-bezier(.2,.9,.25,1);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: "Poppins", sans-serif;
      color: var(--text);
      background: url("https://i.postimg.cc/sD96Zykj/file-00000000db9861f994c233d10d71c73b.png") no-repeat center/cover fixed;
      line-height: 1.5;
    }
    body::before { content: ""; position: fixed; inset: 0; background: var(--overlay); backdrop-filter: blur(1px); z-index: -1; }
    header { position: fixed; top: 0; left: 0; right: 0; background: rgba(0,0,0,.55); backdrop-filter: blur(6px); border-bottom: 1px solid rgba(255,255,255,.12); z-index: 100; }
    .header__inner { max-width: var(--maxw); margin: 0 auto; display: flex; align-items: center; justify-content: space-between; padding: .9rem .75rem; }
    .logo { font-size: 30px; letter-spacing: .18em; font-weight: 600; background: var(--brand-gradient); background-clip: text; color: transparent; }
    .menu-toggle { width: var(--btn-size); height: var(--btn-size); background: rgba(255,255,255,.1); border: none; border-radius: 10px; cursor: pointer; }
    .menu-toggle:hover { background: rgba(255,255,255,.18); transform: scale(1.03); }
    .menu-toggle svg { width: 22px; height: 22px; display: block; }
    .menu-toggle .bar { stroke: white; stroke-width: 2; stroke-linecap: round; transition: transform var(--anim-time) var(--anim-ease), opacity calc(var(--anim-time)/1.6) ease; }
    body.menu-open .menu-toggle .bar:nth-child(1) { transform: translateY(6px) rotate(45deg); }
    body.menu-open .menu-toggle .bar:nth-child(2) { opacity: 0; transform: scaleX(.2); }
    body.menu-open .menu-toggle .bar:nth-child(3) { transform: translateY(-6px) rotate(-45deg); }
    .sidebar { position: fixed; top: 0; right: -260px; width: 260px; height: 100%; background: rgba(15,15,15,.92); backdrop-filter: blur(10px); z-index: 300; transition: right .32s var(--anim-ease); padding: 3.5rem 1rem 2rem; }
    .sidebar.active { right: 0; }
    .sidebar__nav { display: flex; flex-direction: column; gap: 1rem; }
    .sidebar__nav a { color: #fff; text-decoration: none; font-size: 16px; padding: .6rem 1rem; border-radius: 8px; transition: background .25s ease; }
    .sidebar__nav a:hover { background: rgba(255,255,255,.1); }
    .sidebar__nav a.active { background: var(--brand-gradient); }
    main { padding-top: 80px; min-height: 100vh; max-width: var(--maxw); margin: 0 auto; opacity: 0; transition: opacity 0.5s ease; }
    main.visible { opacity: 1; }
    #loading-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.8); display: flex; justify-content: center; align-items: center; z-index: 400; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
    #loading-overlay.active { opacity: 1; pointer-events: auto; }
    .spinner { width: 50px; height: 50px; animation: spin 1s linear infinite; }
    .spinner circle { stroke: url(#brand-gradient); stroke-width: 5; fill: none; }
    @keyframes spin { to { transform: rotate(360deg); } }
    #logout-modal { position: fixed; inset: 0; background: rgba(0,0,0,.8); display: none; justify-content: center; align-items: center; z-index: 500; }
    #logout-modal.active { display: flex; }
    .logout-modal__content { background: linear-gradient(145deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; max-width: 400px; width: 90%; box-shadow: 0 6px 16px rgba(0,0,0,.3); text-align: center; }
    .logout-modal__title { font-size: 1.4rem; font-weight: 600; background: var(--brand-gradient); background-clip: text; color: transparent; margin-bottom: 1rem; }
    .logout-modal__message { font-size: 1rem; color: #f5f7fa; margin-bottom: 1.5rem; }
    .logout-modal__buttons { display: flex; gap: 1rem; justify-content: center; }
    .logout-modal__btn { padding: .6rem 1.2rem; border-radius: 8px; font-size: .95rem; font-weight: 500; color: #fff; border: none; cursor: pointer; transition: transform .25s ease; }
    .logout-modal__btn--confirm { background: linear-gradient(135deg, #28a745, #1d7a34); }
    .logout-modal__btn--cancel { background: linear-gradient(135deg, #e63946, #b32d38); }
    .logout-modal__btn:hover { transform: translateY(-2px); }
    #notification-modal { position: fixed; inset: 0; background: rgba(0,0,0,.8); display: none; justify-content: center; align-items: center; z-index: 500; opacity: 0; transition: opacity 0.3s ease; }
    #notification-modal.active { display: flex; opacity: 1; }
    .notification-modal__content { background: linear-gradient(145deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; max-width: 400px; width: 90%; box-shadow: 0 6px 16px rgba(0,0,0,.3); text-align: center; animation: fadeIn 0.3s ease; }
    .notification-modal__message { font-size: 1rem; color: #f5f7fa; font-weight: 400; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    #niveis .hero { min-height: calc(100vh - 80px); display: flex; align-items: flex-start; justify-content: center; text-align: left; padding: 40px 1rem 24px; }
    #niveis .hero__inner { max-width: 700px; animation: fadeInUp 1.2s ease both; text-align: left; width: 100%; }
    #niveis h1 { font-size: clamp(28px, 4vw, 42px); margin-bottom: 1rem; text-align: left; }
    #niveis .lead { font-size: clamp(16px, 2vw, 18px); margin-bottom: 1.5rem; color: #f5f7fa; text-align: left; }
    #niveis hr { border: none; height: 1px; background: rgba(255,255,255,.18); margin: 1.5rem 0; }
    #niveis .hero__balance { background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.18); border-radius: 12px; padding: 1rem; margin-bottom: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,.25); }
    #niveis .hero__balance p { font-size: 1.2rem; font-weight: 500; color: #f5f7fa; }
    #niveis .hero__balance span { color: #fff; font-weight: 600; }
    #niveis .hero__level { font-size: 1.2rem; font-weight: 500; color: #f5f7fa; margin-top: .5rem; }
    #niveis .hero__level span { color: #fff; font-weight: 600; }
    #niveis .cards-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 1.5rem; margin-top: 1.5rem; }
    #niveis .card { background: linear-gradient(145deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; text-align: center; font-weight: 600; font-size: 1rem; color: #fff; box-shadow: 0 6px 16px rgba(0,0,0,.2); transition: transform .3s ease, box-shadow .3s ease, background .3s ease; cursor: pointer; position: relative; overflow: hidden; }
    #niveis .card:hover { transform: translateY(-8px); box-shadow: 0 10px 20px rgba(0,0,0,.3); background: linear-gradient(145deg, rgba(255,255,255,.18), rgba(255,255,255,.1)); }
    #niveis .card.disabled { background: rgba(255,255,255,.04); border-color: rgba(255,255,255,.08); color: rgba(255,255,255,.4); cursor: not-allowed; pointer-events: none; box-shadow: 0 4px 12px rgba(0,0,0,.15); }
    #niveis .card.rented .btn { background: linear-gradient(135deg, #28a745, #1d7a34); color: #fff; cursor: default; pointer-events: none; box-shadow: none; }
    #niveis .card.disabled .btn { background: rgba(255,255,255,.08); color: rgba(255,255,255,.4); cursor: not-allowed; }
    #niveis .card__icon { width: 48px; height: 48px; margin: 0 auto 1rem; fill: #fff; opacity: 0.9; transition: transform 0.3s ease, opacity 0.3s ease; filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3)); }
    #niveis .card:hover .card__icon { transform: scale(1.1) rotate(5deg); opacity: 1; filter: drop-shadow(0 4px 8px rgba(142, 45, 226, 0.5)); }
    #niveis .card.rented .card__icon { animation: pulse 2s ease-in-out infinite; }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    #niveis .card__title { font-size: 1.4rem; font-weight: 600; background: var(--brand-gradient); background-clip: text; color: transparent; margin-bottom: .75rem; }
    #niveis .card__info { font-size: .9rem; font-weight: 400; color: #f5f7fa; margin-bottom: .5rem; }
    #niveis .card__info span { color: #fff; font-weight: 600; }
    #niveis .card__timer { font-size: .85rem; font-weight: 400; color: #f5f7fa; margin-top: .75rem; background: rgba(255,255,255,.1); padding: .5rem; border-radius: 8px; }
    #niveis .btn { display: inline-block; padding: .6rem 1.2rem; background: var(--brand-gradient); color: #fff; text-decoration: none; border-radius: 10px; font-size: .95rem; font-weight: 500; transition: transform .3s ease, box-shadow .3s ease; margin-top: 1rem; }
    #niveis .btn:hover { transform: translateY(-3px); box-shadow: 0 4px 12px rgba(142,45,226,.4); }
    #perfil { display: none; }
    .profile__inner { max-width: 700px; margin: 0 auto; }
    .profile h1 { font-size: clamp(28px, 4vw, 42px); margin-bottom: 1rem; text-align: center; }
    .profile__form { display: flex; flex-direction: column; gap: 1rem; }
    .profile__card { background: rgba(255,255,255,.08); padding: 1.5rem; border-radius: 16px; box-shadow: 0 6px 16px rgba(0,0,0,.2); }
    .profile__card__title { font-size: 1.2rem; font-weight: 600; background: var(--brand-gradient); background-clip: text; color: transparent; text-align: center; margin-bottom: 1rem; }
    .profile__card label { display: block; margin-bottom: .5rem; }
    .profile__card input { width: 100%; padding: .75rem; margin-bottom: .75rem; background: rgba(255,255,255,.1); border: 1px solid rgba(255,255,255,.28); border-radius: 8px; color: #fff; }
    .btn.edit-mode { background: linear-gradient(135deg, #28a745, #1d7a34); }
    .error-message { color: #e63946; font-size: 12px; display: none; }
    .error-message.active { display: block; }
    #deposito { display: none; }
    .deposit { min-height: 100vh; display: flex; align-items: flex-start; justify-content: center; padding: 80px 1rem 0; }
    .deposit__inner { max-width: 700px; animation: fadeInUp 1.2s ease both; }
    .deposit h1 { font-size: clamp(28px, 4vw, 42px); margin-bottom: 0.5rem; }
    .deposit__form { display: flex; flex-direction: column; gap: 1rem; }
    .deposit__card { background: linear-gradient(145deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; box-shadow: 0 6px 16px rgba(0,0,0,.2); transition: transform .3s ease, box-shadow .3s ease; }
    .deposit__card:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,.3); }
    .deposit__card__title { font-size: 1.4rem; font-weight: 600; background: var(--brand-gradient); background-clip: text; color: transparent; margin-bottom: 1rem; text-align: center; }
    .deposit__card__icon { width: 40px; height: 40px; margin: 0 auto .75rem; fill: #fff; opacity: .9; }
    .deposit__card label { display: block; font-size: 14px; font-weight: 500; margin-bottom: .5rem; color: #f5f7fa; }
    .deposit__card input, .deposit__card select { width: 100%; padding: .75rem; margin-bottom: .75rem; background: rgba(255,255,255,.1); border: 1px solid rgba(255,255,255,.28); border-radius: 8px; color: #fff; font-size: 14px; }
    .deposit__card input[type="file"] { padding: .5rem; }
    .deposit__card input[type="file"]::-webkit-file-upload-button { background: var(--brand-gradient); color: #fff; border: none; padding: .5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 14px; transition: transform .25s ease; }
    .deposit__card input[type="file"]::-webkit-file-upload-button:hover { transform: translateY(-2px); }
    .deposit__card input:focus, .deposit__card select:focus { outline: none; border-color: #8e2de2; }
    .deposit__card input::placeholder, .deposit__card select:invalid { color: #ccc; opacity: 1; font-size: 14px; }
    .proof-preview { margin-top: .5rem; max-height: 200px; overflow: auto; }
    .proof-preview img { max-width: 300px; width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,.18); }
    .deposit__info { background: linear-gradient(145deg, rgba(255,255,255,.15), rgba(255,255,255,.08)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; box-shadow: 0 6px 16px rgba(0,0,0,.2); transition: transform .3s ease, box-shadow .3s ease; margin-bottom: 1rem; }
    .deposit__info:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,.3); }
    .deposit__info__title { font-size: 1.4rem; font-weight: 600; background: var(--brand-gradient); background-clip: text; color: transparent; margin-bottom: 1rem; text-align: center; }
    .deposit__info__icon { width: 40px; height: 40px; margin: 0 auto .75rem; fill: #fff; opacity: .9; }
    .deposit__info__content { font-size: 14px; color: #f5f7fa; }
    .deposit__info__content p { margin-bottom: .5rem; }
    .deposit__history { margin-top: 2rem; background: linear-gradient(145deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; box-shadow: 0 6px 16px rgba(0,0,0,.2); }
    .deposit__history h2 { font-size: 1.5rem; margin-bottom: 1rem; }
    .deposit__history table { width: 100%; border-collapse: collapse; }
    .deposit__history th, .deposit__history td { padding: .75rem; text-align: left; font-size: 14px; border-bottom: 1px solid rgba(255,255,255,.18); }
    .deposit__history th { font-weight: 600; color: #f5f7fa; }
    .deposit__history td { color: #fff; }
    .deposit__history td.status-pendente { color: #ffeb3b; }
    .deposit__history td.status-sucesso { color: #4caf50; }
    .deposit__history td.status-recusado { color: #f44336; }
    .deposit__payment-details { margin-top: 1rem; padding: 1rem; background: rgba(255,255,255,.1); border-radius: 8px; font-size: 14px; color: #f5f7fa; display: none; }
    .deposit__payment-details.active { display: block; }
    .deposit__payment-details p { margin-bottom: .5rem; }
    .deposit__payment-details span { font-weight: 600; color: #fff; }
    #saque { display: none; }
    .withdraw { min-height: 100vh; display: flex; align-items: flex-start; justify-content: center; padding: 80px 1rem 0; }
    .withdraw__inner { max-width: 700px; animation: fadeInUp 1.2s ease both; }
    .withdraw h1 { font-size: clamp(28px, 4vw, 42px); margin-bottom: 0.5rem; }
    .withdraw__form { display: flex; flex-direction: column; gap: 1rem; }
    .withdraw__card { background: linear-gradient(145deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; box-shadow: 0 6px 16px rgba(0,0,0,.2); transition: transform .3s ease, box-shadow .3s ease; }
    .withdraw__card:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,.3); }
    .withdraw__card__title { font-size: 1.4rem; font-weight: 600; background: var(--brand-gradient); background-clip: text; color: transparent; margin-bottom: 1rem; text-align: center; }
    .withdraw__card__icon { width: 40px; height: 40px; margin: 0 auto .75rem; fill: #fff; opacity: .9; }
    .withdraw__card label { display: block; font-size: 14px; font-weight: 500; margin-bottom: .5rem; color: #f5f7fa; }
    .withdraw__card input { width: 100%; padding: .75rem; margin-bottom: .75rem; background: rgba(255,255,255,.1); border: 1px solid rgba(255,255,255,.28); border-radius: 8px; color: #fff; font-size: 14px; }
    .withdraw__card input:focus { outline: none; border-color: #8e2de2; }
    .withdraw__card input::placeholder { color: #ccc; opacity: 1; font-size: 14px; }
    .withdraw__card input:invalid { border-color: #f44336; }
    .error-message { color: #f44336; font-size: 12px; margin-top: -0.5rem; margin-bottom: 0.75rem; display: none; }
    .error-message.active { display: block; }
    .withdraw__balance { background: linear-gradient(145deg, rgba(255,255,255,.15), rgba(255,255,255,.08)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; box-shadow: 0 6px 16px rgba(0,0,0,.2); transition: transform .3s ease, box-shadow .3s ease; margin-bottom: 1rem; }
    .withdraw__balance:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,.3); }
    .withdraw__balance__title { font-size: 1.4rem; font-weight: 600; background: var(--brand-gradient); background-clip: text; color: transparent; margin-bottom: 1rem; text-align: center; }
    .withdraw__balance__icon { width: 40px; height: 40px; margin: 0 auto .75rem; fill: #fff; opacity: .9; }
    .withdraw__balance__content { font-size: 14px; color: #f5f7fa; }
    .withdraw__balance__content p { margin-bottom: .5rem; }
    .withdraw__history { margin-top: 2rem; background: linear-gradient(145deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; box-shadow: 0 6px 16px rgba(0,0,0,.2); }
    .withdraw__history h2 { font-size: 1.5rem; margin-bottom: 1rem; }
    .withdraw__history table { width: 100%; border-collapse: collapse; }
    .withdraw__history th, .withdraw__history td { padding: .75rem; text-align: left; font-size: 14px; border-bottom: 1px solid rgba(255,255,255,.18); }
    .withdraw__history th { font-weight: 600; color: #f5f7fa; }
    .withdraw__history td { color: #fff; }
    .withdraw__history td.status-pendente { color: #ffeb3b; }
    .withdraw__history td.status-sucesso { color: #4caf50; }
    .withdraw__history td.status-recusado { color: #f44336; }
    #equipa { display: none; }
    .team { min-height: 100vh; display: flex; align-items: flex-start; justify-content: center; padding: 80px 1rem 0; }
    .team__inner { max-width: 700px; animation: fadeInUp 1.2s ease both; }
    .team h1 { font-size: clamp(28px, 4vw, 42px); margin-bottom: 0.5rem; }
    .team__info { background: linear-gradient(145deg, rgba(255,255,255,.15), rgba(255,255,255,.08)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; box-shadow: 0 6px 16px rgba(0,0,0,.2); transition: transform .3s ease, box-shadow .3s ease; margin-bottom: 1rem; }
    .team__info:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,.3); }
    .team__info__title { font-size: 1.4rem; font-weight: 600; background: var(--brand-gradient); background-clip: text; color: transparent; margin-bottom: 1rem; text-align: center; }
    .team__info__icon { width: 40px; height: 40px; margin: 0 auto .75rem; fill: #fff; opacity: .9; }
    .team__info__content { font-size: 14px; color: #f5f7fa; }
    .team__info__content p { margin-bottom: .5rem; }
    .invite-link { margin-bottom: 1.5rem; }
    .invite-link label { display: block; font-size: 14px; font-weight: 500; margin-bottom: .5rem; color: #f5f7fa; }
    .invite-link__container { display: flex; gap: .5rem; align-items: center; }
    .invite-link__container input { flex: 1; padding: .75rem; background: rgba(255,255,255,.1); border: 1px solid rgba(255,255,255,.28); border-radius: 8px; color: #fff; font-size: 14px; }
    .invite-link__container input[readonly] { cursor: default; }
    .invite-link__container .btn { padding: .75rem 1.5rem; }
    .team__members { margin-top: 2rem; background: linear-gradient(145deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; box-shadow: 0 6px 16px rgba(0,0,0,.2); transition: transform .3s ease, box-shadow .3s ease; }
    .team__members:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,.3); }
    .team__members h2 { font-size: 1.5rem; margin-bottom: 1rem; }
    .team__members table { width: 100%; border-collapse: collapse; }
    .team__members th, .team__members td { padding: .75rem; text-align: left; font-size: 14px; border-bottom: 1px solid rgba(255,255,255,.18); }
    .team__members th { font-weight: 600; color: #f5f7fa; }
    .team__members td { color: #fff; }
    .team__members td.status-ativo { color: #4caf50; }
    .team__members td.status-inativo { color: #f44336; }
    #sobre { display: none; }
    .about { min-height: 100vh; display: flex; align-items: flex-start; justify-content: center; padding: 80px 1rem 0; }
    .about__inner { max-width: 700px; animation: fadeInUp 1.2s ease both; }
    .about h1 { font-size: clamp(28px, 4vw, 42px); margin-bottom: 0.5rem; }
    .about__info { background: linear-gradient(145deg, rgba(255,255,255,.15), rgba(255,255,255,.08)); border: 1px solid rgba(255,255,255,.2); border-radius: 16px; padding: 1.5rem; box-shadow: 0 6px 16px rgba(0,0,0,.2); transition: transform .3s ease, box-shadow .3s ease; margin-bottom: 1rem; }
    .about__info:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,.3); }
    .about__info__title { font-size: 1.4rem; font-weight: 600; background: var(--brand-gradient); background-clip: text; color: transparent; margin-bottom: 1rem; text-align: center; }
    .about__info__icon { width: 40px; height: 40px; margin: 0 auto .75rem; fill: #fff; opacity: .9; }
    .about__info__content { font-size: 14px; color: #f5f7fa; }
    .about__info__content p { margin-bottom: .5rem; }
    .about__info__content ul { list-style: none; margin: 1rem 0; }
    .about__info__content ul li { margin-bottom: .5rem; padding-left: 1.5rem; position: relative; }
    .about__info__content ul li::before { content: "•"; position: absolute; left: 0; color: #4caf50; font-size: 1.2rem; }
    .btn { padding: .5rem 1rem; background: var(--brand-gradient); color: #fff; border-radius: 8px; font-size: .9rem; border: none; cursor: pointer; transition: transform .25s ease; display: inline-block; text-decoration: none; }
    .btn:hover { transform: translateY(-2px); }
    #contacte-nos { display: none; }
    .contact { min-height: 100vh; display: flex; align-items: flex-start; justify-content: center; padding: 80px 1rem 0; }
    .contact__inner { max-width: 700px; animation: fadeInUp 1.2s ease both; }
    .contact h1 { font-size: clamp(28px, 4vw, 42px); margin-bottom: 1.5rem; }
    .contact__buttons { background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.18); border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,.25); display: flex; gap: 1rem; flex-wrap: nowrap; justify-content: center; }
    .btn--border { position: relative; padding: 0.75rem 1.5rem 0.75rem 2.5rem; background: transparent; color: #fff; border-radius: 8px; font-size: 0.9rem; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; transition: transform 0.25s ease; z-index: 1; }
    .btn--border::before { content: ""; position: absolute; inset: 0; border: 2px solid transparent; border-radius: 8px; background: var(--brand-gradient) border-box; -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0); mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0); -webkit-mask-composite: destination-out; mask-composite: exclude; z-index: -1; }
    .btn--border:hover { transform: translateY(-2px); }
    .btn--border svg { width: 20px; height: 20px; fill: #fff; transition: fill 0.25s ease; }
    .btn--border:hover svg { fill: url(#brand-gradient); }
    /* Estilos para o widget do LiveChat */
    #livechat-container {
      z-index: 200;
    }
    #livechat-container .lc-window {
      border-radius: 12px !important;
      box-shadow: 0 6px 16px rgba(0,0,0,.3) !important;
      font-family: "Poppins", sans-serif !important;
    }
    #livechat-container .lc-minimize, #livechat-container .lc-maximize {
      background: var(--brand-gradient) !important;
      border-radius: 8px !important;
    }
    #livechat-container .lc-header {
      background: var(--brand-gradient) !important;
      color: var(--text) !important;
    }
    #livechat-container .lc-input, #livechat-container .lc-textarea {
      background: rgba(255,255,255,.1) !important;
      border: 1px solid rgba(255,255,255,.28) !important;
      color: var(--text) !important;
      border-radius: 8px !important;
    }
    #livechat-container .lc-button {
      background: var(--brand-gradient) !important;
      color: var(--text) !important;
      border-radius: 8px !important;
      transition: transform .25s ease !important;
    }
    #livechat-container .lc-button:hover {
      transform: translateY(-2px) !important;
    }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    @media (max-width: 768px) {
      .logo { font-size: 24px; }
      #niveis .cards-container { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); }
      #niveis .card { padding: 1.2rem; }
      #niveis .card__title { font-size: 1.2rem; }
      #niveis .card__info { font-size: .85rem; }
      #niveis .card__timer { font-size: .8rem; padding: .4rem; }
      .sidebar { width: 220px; right: -220px; }
      .sidebar.active { right: 0; }
      .deposit h1, .withdraw h1, .team h1, .about h1, .contact h1 { font-size: 26px; }
      .proof-preview img { max-width: 100%; }
      .deposit__info__title, .deposit__card__title, .withdraw__balance__title, .withdraw__card__title, .team__info__title, .about__info__title { font-size: 1.2rem; }
      .deposit__info__icon, .deposit__card__icon, .withdraw__balance__icon, .withdraw__card__icon, .team__info__icon, .about__info__icon { width: 32px; height: 32px; }
      .contact__buttons { gap: 0.5rem; padding: 1rem; }
      .btn--border { padding: 0.5rem 1rem 0.5rem 2rem; font-size: 0.85rem; }
      .logout-modal__content { max-width: 90%; padding: 1rem; }
      .logout-modal__title { font-size: 1.2rem; }
      .logout-modal__message { font-size: .9rem; }
      .logout-modal__btn { padding: .5rem 1rem; font-size: .85rem; }
      .notification-modal__content { max-width: 90%; padding: 1rem; }
      .notification-modal__message { font-size: .9rem; }
      #livechat-container .lc-window { max-width: 90% !important; }
    }
    @media (max-height: 600px) {
      .deposit, .withdraw, .team, .about, .contact { padding-top: 60px; }
    }
  </style>
</head>
<body>
  <svg style="position: absolute; width: 0; height: 0;" aria-hidden="true">
    <defs>
      <linearGradient id="brand-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#8e2de2" />
        <stop offset="100%" style="stop-color:#4a00e0" />
      </linearGradient>
      <symbol id="trophy-icon" viewBox="0 0 24 24">
        <path fill="currentColor" d="M18 2h-2V1H8v1H6a2 2 0 0 0-2 2v1h-.586a1 1 0 0 0-.707 1.707l1.414 1.414A1 1 0 0 0 5 8h3v12h2v2h4v-2h2V8h3a1 1 0 0 0 .879-.879l1.414-1.414A1 1 0 0 0 20.586 5H20V4a2 2 0 0 0-2-2zm-2 6H8v10h8V8z"/>
        <path fill="url(#brand-gradient)" d="M16 8H8v10h8V8z"/>
      </symbol>
    </defs>
  </svg>
  <div id="loading-overlay">
    <svg class="spinner" viewBox="0 0 50 50" aria-hidden="true">
      <circle cx="25" cy="25" r="20" stroke-dasharray="62.8 62.8" stroke="url(#brand-gradient)" stroke-width="5" fill="none" />
    </svg>
  </div>
  <div id="logout-modal" role="dialog" aria-labelledby="logout-modal-title" aria-describedby="logout-modal-message">
    <div class="logout-modal__content">
      <h2 class="logout-modal__title" id="logout-modal-title">Confirmar Logout</h2>
      <p class="logout-modal__message" id="logout-modal-message">Deseja realmente sair da sua conta?</p>
      <div class="logout-modal__buttons">
        <button class="logout-modal__btn logout-modal__btn--confirm" id="logout-confirm">Sim</button>
        <button class="logout-modal__btn logout-modal__btn--cancel" id="logout-cancel">Não</button>
      </div>
    </div>
  </div>
  <div id="notification-modal" role="dialog" aria-describedby="notification-modal-message">
    <div class="notification-modal__content">
      <p class="notification-modal__message" id="notification-modal-message"></p>
    </div>
  </div>
  <header>
    <div class="header__inner">
      <button class="menu-toggle" id="btnMenu" aria-label="Abrir menu">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path class="bar" d="M4 6h16"/><path class="bar" d="M4 12h16"/><path class="bar" d="M8 18h12"/></svg>
      </button>
      <div class="logo">ZINZINO</div>
    </div>
  </header>
  <nav class="sidebar" id="sidebar">
    <div class="sidebar__nav">
      <a href="#" data-target="niveis" class="active">Nível</a>
      <a href="#" data-target="perfil">Perfil</a>
      <a href="#" data-target="deposito">Depósito</a>
      <a href="#" data-target="saque">Saque</a>
      <a href="#" data-target="equipa">Equipa</a>
      <a href="#" data-target="sobre">Sobre</a>
      <a href="#" data-target="contacte-nos">Contacte-nos</a>
      <a href="#" id="logout">Sair</a>
    </div>
  </nav>
  <main id="niveis">
    <section class="hero" id="main-content">
      <div class="hero__inner">
        <h1>Isso não é apenas uma plataforma.</h1>
        <p class="lead">É a ZINZINO – a próxima geração de magnatas.</p>
        <hr>
        <div class="hero__balance">
          <p>Saldo Disponível: <span id="balance-amount">500.00 Kz</span></p>
          <p class="hero__level">Nível Alugado: <span id="level-rented">0</span></p>
        </div>
        <div class="cards-container"></div>
      </div>
    </section>
  </main>
  <main id="perfil" class="profile" style="display:none">
    <div class="profile__inner">
      <h1>Seu Perfil</h1>
      <form class="profile__form">
        <div class="profile__card">
          <div class="profile__card__title">Informações do Usuário</div>
          <label for="username">Nome de Usuário</label>
          <input type="text" id="username" readonly />
          <label for="invite-code">Código de Convite</label>
          <input type="text" id="invite-code" readonly />
        </div>
        <div class="profile__card">
          <div class="profile__card__title">Informações Bancárias</div>
          <label for="bank-name">Nome do Banco</label>
          <input type="text" id="bank-name" placeholder="Digite o nome do banco" required />
          <label for="iban">IBAN</label>
          <input type="text" id="iban" placeholder="Digite o IBAN (21 dígitos)" pattern="[0-9]{21}" maxlength="21" required />
          <div class="error-message" id="iban-error">O IBAN deve conter exatamente 21 dígitos numéricos.</div>
        </div>
        <button type="button" class="btn" id="editProfileBtn">Salvar Perfil</button>
      </form>
    </div>
  </main>
  <main id="deposito" class="deposit" style="display:none">
    <div class="deposit__inner">
      <h1>Depósito</h1>
      <div class="deposit__info">
        <svg class="deposit__info__icon" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <div class="deposit__info__title">Informações de Depósito</div>
        <div class="deposit__info__content">
          <p><strong>Saldo Disponível:</strong> <span id="available-balance">0.00</span> Kz</p>
          <p>1. Valor mínimo: 5000 Kz.</p>
          <p>2. Os depósitos devem ser feitos no período das 9h às 21h.</p>
          <p>3. O usuário deve selecionar o banco correspondente para efetuar o depósito. No entanto, se não houver o banco correspondente, deve escolher o método Pagamento por Referência.</p>
          <p>4. Os depósitos são processados em até 15 minutos.</p>
        </div>
      </div>
      <form class="deposit__form">
        <div class="deposit__card">
          <svg class="deposit__card__icon" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="currentColor" d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8h16v10z"/>
          </svg>
          <div class="deposit__card__title">Realizar Depósito</div>
          <label for="deposit-amount">Valor do Depósito</label>
          <input type="number" id="deposit-amount" name="deposit-amount" placeholder="Digite o valor do depósito (mínimo 5000 Kz)" min="5000" step="0.01" />
          <label for="payment-method">Método de Pagamento</label>
          <select id="payment-method" name="payment-method" required>
            <option value="" disabled selected>Selecione o método de pagamento</option>
            <option value="transferencia">Transferência Bancária</option>
            <option value="referencia">Pagamento por Referência</option>
          </select>
          <div class="deposit__payment-details" id="payment-details">
            <p id="payment-details-content"></p>
          </div>
          <label for="proof-upload">Comprovativo</label>
          <input type="file" id="proof-upload" name="proof-upload" accept=".jpg,.jpeg,.png" />
          <div id="proof-preview" class="proof-preview"></div>
        </div>
        <button type="button" class="btn" id="confirmDepositBtn">Confirmar Depósito</button>
      </form>
      <div class="deposit__history" id="deposit-history" style="display: none;">
        <h2>Histórico de Depósitos</h2>
        <table>
          <thead>
            <tr>
              <th>Valor</th>
              <th>Data</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="history-table-body"></tbody>
        </table>
      </div>
    </div>
  </main>
  <main id="saque" class="withdraw" style="display:none">
    <div class="withdraw__inner">
      <h1>Saque</h1>
      <div class="withdraw__balance">
        <svg class="withdraw__balance__icon" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <div class="withdraw__balance__title">Informações de Saque</div>
        <div class="withdraw__balance__content">
          <p><strong>Saldo Disponível:</strong> <span id="withdraw-balance-amount">0.00</span> Kz</p>
          <p>1. Valor mínimo: 1500 Kz</p>
          <p>2. Os saques devem ser feitos no período das 9h até 19h</p>
          <p>3. Os saques são processados em até 24h</p>
          <p>4. Taxa de saque: 9%</p>
        </div>
      </div>
      <form class="withdraw__form">
        <div class="withdraw__card">
          <svg class="withdraw__card__icon" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="currentColor" d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8h16v10z"/>
          </svg>
          <div class="withdraw__card__title">Realizar Saque</div>
          <label for="withdraw-amount">Valor do Saque</label>
          <input type="number" id="withdraw-amount" name="withdraw-amount" placeholder="Digite o valor do saque (mínimo 1500 Kz)" min="1500" step="0.01" required />
          <label for="withdraw-iban">IBAN</label>
          <input type="text" id="withdraw-iban" name="iban" readonly />
          <div class="error-message" id="withdraw-iban-error">O IBAN deve conter exatamente 21 dígitos numéricos.</div>
        </div>
        <button type="button" class="btn" id="confirmWithdrawBtn">Confirmar Saque</button>
      </form>
      <div class="withdraw__history" id="withdraw-history" style="display: none;">
        <h2>Histórico de Saques</h2>
        <table>
          <thead>
            <tr>
              <th>Valor (Líquido)</th>
              <th>Data</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="withdraw-history-table-body"></tbody>
        </table>
      </div>
    </div>
  </main>
  <main id="equipa" class="team" style="display:none">
    <div class="team__inner">
      <h1>Equipa</h1>
      <div class="team__info">
        <svg class="team__info__icon" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <div class="team__info__title">Gerenciar Equipa</div>
        <div class="team__info__content">
          <p><strong>Total de Membros:</strong> <span id="total-members">0</span></p>
          <p><strong>Membros Ativos:</strong> <span id="active-members">0</span></p>
          <p>Convide amigos e ganhe 25% de seus depósitos.</p>
        </div>
      </div>
      <div class="invite-link">
        <label for="invite-url">Link de Convite</label>
        <div class="invite-link__container">
          <input type="text" id="invite-url" readonly />
          <button type="button" class="btn" id="copyInviteBtn" aria-label="Copiar link">Copiar</button>
        </div>
      </div>
      <div class="team__members" id="team-members">
        <h2>Membros da Equipa</h2>
        <table role="grid">
          <thead>
            <tr role="row">
              <th role="columnheader">E-mail</th>
              <th role="columnheader">Status</th>
            </tr>
          </thead>
          <tbody id="members-table-body" role="rowgroup"></tbody>
        </table>
      </div>
    </div>
  </main>
  <main id="sobre" class="about" style="display:none">
    <div class="about__inner">
      <h1>Sobre</h1>
      <div class="about__info" role="region" aria-labelledby="about-info-title">
        <svg class="about__info__icon" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <h2 class="about__info__title" id="about-info-title">Descubra a Zinzino</h2>
        <div class="about__info__content">
          <p>Embarque numa jornada de prosperidade com a Zinzino, a plataforma de investimento que está transformando vidas financeiras com segurança e inovação! Somos uma empresa confiável, regulamentada e líder global, comprometida em oferecer oportunidades de ganhos excepcionais para todos os nossos parceiros.</p>
          <p>Como Parceiro Independente, você pode começar com 5000Kz, aproveitando nosso modelo de vendas diretas para construir sua rede e alcançar liberdade financeira. Nossa plataforma é intuitiva, segura e projetada para todos – se você sabe usar um smartphone, pode investir com a Zinzino!</p>
          <ul>
            <li><strong>Níveis de Investimento</strong>: Escolha entre 8 níveis incríveis, cada um com uma renda diária de 20% do investimento inicial e duração de 50 dias:<br>
              - <strong>Nível 1</strong>: Investimento de 5000Kz, renda diária de 1000Kz.<br>
              - <strong>Nível 2</strong>: Investimento de 10000Kz, renda diária de 2000Kz.<br>
              - <strong>Nível 3</strong>: Investimento de 20000Kz, renda diária de 4000Kz.<br>
              - <strong>Nível 4</strong>: Investimento de 40000Kz, renda diária de 8000Kz.<br>
              - <strong>Nível 5</strong>: Investimento de 80000Kz, renda diária de 16000Kz.<br>
              - <strong>Nível 6</strong>: Investimento de 160000Kz, renda diária de 32000Kz.<br>
              - <strong>Nível 7</strong>: Investimento de 320000Kz, renda diária de 64000Kz.<br>
              - <strong>Nível 8</strong>: Investimento de 640000Kz, renda diária de 128000Kz.</li>
            <li><strong>Comissões de Convite</strong>: Convide um amigo e receba 25% do depósito inicial dele! Além disso, ganhe comissões adicionais de 10% a 30% em vendas diretas de produtos, como o BalanceOil, e bônus por construir sua equipe.</li>
            <li><strong>Depósitos e Retiradas</strong>: Comece rapidamente com depósitos instantâneos através de métodos confiáveis. As retiradas são processadas em minutos, garantindo que seus ganhos cheguem ao seu bolso sem demora. Nossa equipe de suporte está pronta para ajudar a qualquer momento!</li>
          </ul>
          <p>Com a Zinzino, você investe com confiança em uma plataforma regulamentada e segura. Comece hoje e construa seu futuro financeiro!</p>
          <a href="#" data-target="deposito" class="btn">Comece a Investir Agora!</a>
        </div>
      </div>
    </div>
  </main>
  <main id="contacte-nos" class="contact" style="display:none">
    <div class="contact__inner">
      <h1>Contacte-nos</h1>
      <div class="contact__buttons">
        <a href="https://direct.lc.chat/19293268/" target="_blank" class="btn btn--border">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
          </svg>
          Suporte
        </a>
        <a href="https://t.me/+mKY_nVZEJx80MmVk" target="_blank" class="btn btn--border">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M20.665 3.717l-2.237 10.54c-.167.787-.662 1.008-1.343.632l-3.417-2.51-1.654 1.594c-.183.183-.337.333-.672.333l.246-3.492 6.367-5.75c.278-.25-.061-.387-.428-.154L9.56 9.92l-3.416-.996c-.737-.216-.755-.75.154-1.113l13.36-5.14c.614-.236 1.147.141.997.846z" />
          </svg>
          Telegram Oficial
        </a>
      </div>
    </div>
  </main>
  <script>
  // Função para inicializar o Supabase
  function initializeSupabase() {
    if (typeof window.supabase === 'undefined') {
      console.error('Erro: Biblioteca Supabase não foi carregada.');
      showNotification('Erro ao carregar a biblioteca Supabase. Tente novamente mais tarde.', 3000);
      return null;
    }
    const supabaseUrl = 'https://ryqyjpzzozpmgvkaciwf.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ5cXlqcHp6b3pwbWd2a2FjaXdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0NzUxNDYsImV4cCI6MjA3MjA1MTE0Nn0.b_KLueY1HyakuX_QpLoepcgLkh22Fr9MPJ_Qhf8h_Mw';
    return window.supabase.createClient(supabaseUrl, supabaseKey);
  }

  // Função para exibir notificações estilizadas
  function showNotification(message, duration = 3000) {
    const notificationModal = document.getElementById('notification-modal');
    const notificationMessage = document.getElementById('notification-modal-message');
    notificationMessage.textContent = message;
    notificationModal.classList.add('active');
    setTimeout(() => {
      notificationModal.classList.remove('active');
    }, duration);
  }

  // Eventos para fechar o modal de notificação
  const notificationModal = document.getElementById('notification-modal');
  window.addEventListener('click', (e) => {
    if (notificationModal.classList.contains('active') && e.target === notificationModal) {
      notificationModal.classList.remove('active');
    }
  });
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && notificationModal.classList.contains('active')) {
      notificationModal.classList.remove('active');
    }
  });

  // Aguarda o carregamento do DOM
  document.addEventListener('DOMContentLoaded', async () => {
    const supabase = initializeSupabase();
    if (!supabase) return;

    const bodyEl = document.body;
    const sidebar = document.getElementById("sidebar");
    const btnMenu = document.getElementById("btnMenu");
    const loadingOverlay = document.getElementById("loading-overlay");
    const logoutModal = document.getElementById("logout-modal");
    const logoutBtn = document.getElementById("logout");
    const logoutConfirm = document.getElementById("logout-confirm");
    const logoutCancel = document.getElementById("logout-cancel");
    const copyInviteBtn = document.getElementById('copyInviteBtn');

    // Verificar autenticação
    const { data: { user }, error: authError } = await supabase.auth.getUser();
    console.log('Usuário autenticado:', user);
    if (authError || !user) {
      console.error('Erro de autenticação:', authError);
      showNotification('Você precisa estar logado para acessar o dashboard.', 3000);
      window.location.href = 'login.html';
      return;
    }

    // Subscription para monitorar depósitos aprovados e creditar comissão
    supabase
      .channel('deposits-changes')
      .on(
        'postgres_changes',
        {
          event: 'UPDATE',
          schema: 'public',
          table: 'deposits',
          filter: `status=eq.sucesso`,
        },
        async (payload) => {
          const deposit = payload.new;
          const { data: inviteeData, error: inviteeError } = await supabase
            .from('users')
            .select('invited_by, active')
            .eq('id', deposit.user_id)
            .single();
          if (inviteeError || !inviteeData.invited_by) return;

          // Verificar se é o primeiro depósito com sucesso
          const { data: previousDeposits, error: prevError } = await supabase
            .from('deposits')
            .select('id')
            .eq('user_id', deposit.user_id)
            .eq('status', 'sucesso')
            .neq('id', deposit.id);
          if (prevError || previousDeposits.length > 0) return; // Não é o primeiro

          // Atualizar o status do usuário para ativo
          if (!inviteeData.active) {
            const { error: activeError } = await supabase
              .from('users')
              .update({ active: true })
              .eq('id', deposit.user_id);
            if (activeError) {
              console.error('Erro ao atualizar status do usuário para ativo:', activeError);
              return;
            }
            // Atualizar a seção de equipe se o usuário atual estiver na seção "equipa"
            if (document.getElementById('equipa').style.display === 'block') {
              await initTeamSection();
            }
          }

          // Creditar comissão ao convidador
          const commission = deposit.amount * 0.25;
          const { data: inviterData, error: inviterError } = await supabase
            .from('users')
            .select('balance')
            .eq('id', inviteeData.invited_by)
            .single();
          if (inviterError) {
            console.error('Erro ao buscar dados do convidador:', inviterError);
            return;
          }

          const newBalance = inviterData.balance + commission;
          const { error: updateError } = await supabase
            .from('users')
            .update({ balance: newBalance })
            .eq('id', inviteeData.invited_by);
          if (updateError) {
            console.error('Erro ao creditar comissão:', updateError);
            return;
          }

          // Atualizar a interface se o usuário atual for o convidador
          if (inviteeData.invited_by === user.id) {
            balance = newBalance;
            await updateBalanceAndLevel();
            showNotification(`Comissão de ${commission.toLocaleString()} Kz creditada por depósito do convidado!`, 3000);
          }
        }
      )
      .subscribe();

    // Funções do menu lateral
    function openMenu() {
      sidebar.classList.add("active");
      bodyEl.classList.add("menu-open");
    }
    function closeMenu() {
      sidebar.classList.remove("active");
      bodyEl.classList.remove("menu-open");
    }
    btnMenu.addEventListener("click", () => {
      sidebar.classList.contains("active") ? closeMenu() : openMenu();
    });
    window.addEventListener('click', (e) => {
      if (!sidebar.classList.contains('active')) return;
      if (!sidebar.contains(e.target) && !btnMenu.contains(e.target)) closeMenu();
    });
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && sidebar.classList.contains('active')) closeMenu();
    });

    // Navegação entre seções
    async function showLoadingAndNavigate(target) {
      localStorage.setItem('selectedSection', target);
      document.querySelectorAll('main').forEach(m => {
        console.log(`Seção ${m.id}: display = ${m.style.display}`);
        m.style.display = 'none';
        m.classList.remove('visible');
      });
      const targetSection = document.getElementById(target);
      if (targetSection) {
        targetSection.style.display = 'block';
        setTimeout(() => {
          targetSection.classList.add('visible');
        }, 10);
        document.querySelectorAll('.sidebar__nav a').forEach(a => a.classList.remove('active'));
        const activeLink = document.querySelector(`.sidebar__nav a[data-target="${target}"]`);
        if (activeLink) activeLink.classList.add('active');
        // Inicializar seções específicas
        if (target === 'deposito') {
          await renderDepositHistory();
        } else if (target === 'saque') {
          await renderWithdrawHistory();
          updateWithdrawIban(); // Atualiza o IBAN na seção de saque
        } else if (target === 'equipa') {
          await initTeamSection();
        } else if (target === 'niveis') {
          await renderLevelCards();
        }
        loadingOverlay.classList.remove('active');
      } else {
        console.error(`Seção ${target} não encontrada.`);
        showNotification('Seção não encontrada. Retornando à página inicial.', 3000);
        localStorage.setItem('selectedSection', 'niveis');
        document.getElementById('niveis').style.display = 'block';
        setTimeout(() => {
          document.getElementById('niveis').classList.add('visible');
        }, 10);
        document.querySelector('.sidebar__nav a[data-target="niveis"]').classList.add('active');
        loadingOverlay.classList.remove('active');
      }
    }

    document.querySelectorAll('.sidebar__nav a[data-target]').forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        const target = link.dataset.target;
        loadingOverlay.classList.add('active');
        setTimeout(() => showLoadingAndNavigate(target), 300);
      });
    });

    document.querySelectorAll('a[data-target="deposito"]').forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        loadingOverlay.classList.add('active');
        setTimeout(async () => {
          showLoadingAndNavigate('deposito');
          await renderDepositHistory();
        }, 300);
      });
    });

      // Exibir seção inicial (Níveis) imediatamente após o login
  async function initializePage() {
    console.log('Inicializando página com seção Níveis...');
    document.querySelectorAll('main').forEach(m => {
      m.style.display = 'none';
      m.classList.remove('visible');
    });
    const niveisSection = document.getElementById('niveis');
    niveisSection.style.display = 'block';
    setTimeout(() => {
      niveisSection.classList.add('visible');
    }, 10);
    document.querySelectorAll('.sidebar__nav a').forEach(a => a.classList.remove('active'));
    document.querySelector('.sidebar__nav a[data-target="niveis"]').classList.add('active');
    localStorage.setItem('selectedSection', 'niveis');

    // Renderizar os cartões de níveis imediatamente
    try {
      await initUserData();
      await renderLevelCards();
    } catch (error) {
      console.error('Erro ao inicializar dados ou renderizar cartões:', error);
      showNotification('Erro ao carregar dados iniciais. Tente novamente.', 3000);
    }
  }

  // Função para inicializar dados do usuário
  let userData = null;
  let balance = 500.00;
  let rentedLevel = 0;
  let rentalTimestamp = 0;
  let lastIncomeTimestamp = 0;

  async function initUserData() {
    try {
      const { data, error } = await supabase
        .from('users')
        .select('balance, rented_level, rental_timestamp, last_income_timestamp, username, invite_code, bank_name, iban, invited_by, active')
        .eq('id', user.id)
        .single();
      if (error) throw error;

      userData = data;
      balance = (data.balance !== null && data.balance !== undefined) ? data.balance : 500.00;
      rentedLevel = data.rented_level || 0;
      rentalTimestamp = data.rental_timestamp || 0;
      lastIncomeTimestamp = data.last_income_timestamp || 0;

      // Configurar variáveis do LiveChat com dados do usuário
      window.__lc = window.__lc || {};
      window.__lc.visitor = {
        name: data.username || 'Usuário Zinzino',
        email: user.email || ''
      };
      if (window.LiveChatWidget) {
        window.LiveChatWidget.call('update_session_variables', window.__lc.visitor);
      }

      await updateBalanceAndLevel();
      await updateProfileSection();
      await updateWithdrawIban();
      await initTeamSection();
    } catch (error) {
      console.error('Erro ao carregar dados do usuário:', error);
      showNotification('Erro ao carregar dados do usuário. Tente novamente.', 3000);
    }
  }

  // Atualizar saldo e nível na interface
  async function updateBalanceAndLevel() {
    const balanceElement = document.getElementById('balance-amount');
    const levelElement = document.getElementById('level-rented');
    const withdrawBalanceElement = document.getElementById('withdraw-balance-amount');
    const availableBalanceElement = document.getElementById('available-balance');

    balanceElement.textContent = balance.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' Kz';
    levelElement.textContent = rentedLevel;
    withdrawBalanceElement.textContent = balance.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    availableBalanceElement.textContent = balance.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

    // Verificar e creditar renda diária
    await checkAndCreditDailyIncome();
  }

  // Atualizar seção de perfil
  async function updateProfileSection() {
    const usernameInput = document.getElementById('username');
    const inviteCodeInput = document.getElementById('invite-code');
    const bankNameInput = document.getElementById('bank-name');
    const ibanInput = document.getElementById('iban');

    if (userData) {
      usernameInput.value = userData.username || '';
      inviteCodeInput.value = userData.invite_code || '';
      bankNameInput.value = userData.bank_name || '';
      ibanInput.value = userData.iban || '';
    }
  }

  // Atualizar IBAN na seção de saque
  function updateWithdrawIban() {
    const withdrawIbanInput = document.getElementById('withdraw-iban');
    withdrawIbanInput.value = userData && userData.iban ? userData.iban : '';
  }

  // Função para inicializar a seção de equipe
  async function initTeamSection() {
    const totalMembersElement = document.getElementById('total-members');
    const activeMembersElement = document.getElementById('active-members');
    const inviteUrlInput = document.getElementById('invite-url');
    const membersTableBody = document.getElementById('members-table-body');

    try {
      const { data: members, error } = await supabase
        .from('users')
        .select('email, active')
        .eq('invited_by', user.id);
      if (error) throw error;

      const totalMembers = members.length;
      const activeMembers = members.filter(member => member.active).length;

      totalMembersElement.textContent = totalMembers;
      activeMembersElement.textContent = activeMembers;

      const baseUrl = window.location.origin;
      inviteUrlInput.value = `${baseUrl}/signup.html?invite=${userData.invite_code || ''}`;

      membersTableBody.innerHTML = '';
      members.forEach(member => {
        const row = document.createElement('tr');
        row.setAttribute('role', 'row');
        row.innerHTML = `
          <td role="cell">${member.email}</td>
          <td role="cell" class="status-${member.active ? 'ativo' : 'inativo'}">${member.active ? 'Ativo' : 'Inativo'}</td>
        `;
        membersTableBody.appendChild(row);
      });
    } catch (error) {
      console.error('Erro ao carregar dados da equipe:', error);
      showNotification('Erro ao carregar dados da equipe. Tente novamente.', 3000);
    }
  }

  // Copiar link de convite
  copyInviteBtn.addEventListener('click', () => {
    const inviteUrlInput = document.getElementById('invite-url');
    inviteUrlInput.select();
    try {
      document.execCommand('copy');
      showNotification('Link de convite copiado com sucesso!', 2000);
    } catch (err) {
      console.error('Erro ao copiar o link:', err);
      showNotification('Erro ao copiar o link. Tente novamente.', 2000);
    }
  });

  // Renderizar cartões de níveis
  async function renderLevelCards() {
    const levels = [
      { level: 1, investment: 5000, dailyIncome: 1000, duration: 50 },
      { level: 2, investment: 10000, dailyIncome: 2000, duration: 50 },
      { level: 3, investment: 20000, dailyIncome: 4000, duration: 50 },
      { level: 4, investment: 40000, dailyIncome: 8000, duration: 50 },
      { level: 5, investment: 80000, dailyIncome: 16000, duration: 50 },
      { level: 6, investment: 160000, dailyIncome: 32000, duration: 50 },
      { level: 7, investment: 320000, dailyIncome: 64000, duration: 50 },
      { level: 8, investment: 640000, dailyIncome: 128000, duration: 50 },
    ];

    const cardsContainer = document.querySelector('.cards-container');
    cardsContainer.innerHTML = '';

    levels.forEach(level => {
      const isRented = level.level === rentedLevel;
      const isDisabled = balance < level.investment || (rentedLevel !== 0 && level.level !== rentedLevel);
      const remainingTime = isRented ? calculateRemainingTime(rentalTimestamp, level.duration) : null;

      const card = document.createElement('div');
      card.className = `card ${isRented ? 'rented' : ''} ${isDisabled ? 'disabled' : ''}`;
      card.innerHTML = `
        <svg class="card__icon" viewBox="0 0 24 24" aria-hidden="true">
          <use xlink:href="#trophy-icon"></use>
        </svg>
        <div class="card__title">Nível ${level.level}</div>
        <p class="card__info">Investimento: <span>${level.investment.toLocaleString('pt-BR')} Kz</span></p>
        <p class="card__info">Renda Diária: <span>${level.dailyIncome.toLocaleString('pt-BR')} Kz</span></p>
        <p class="card__info">Duração: <span>${level.duration} dias</span></p>
        ${isRented && remainingTime ? `<p class="card__timer">Tempo Restante: <span>${remainingTime}</span></p>` : ''}
        <a href="#" class="btn" data-level="${level.level}">${isRented ? 'Alugado' : 'Alugar'}</a>
      `;
      cardsContainer.appendChild(card);
    });

    // Adicionar eventos aos botões de aluguel
    document.querySelectorAll('.card .btn').forEach(button => {
      button.addEventListener('click', async (e) => {
        e.preventDefault();
        const level = parseInt(button.dataset.level);
        if (rentedLevel !== 0 && level !== rentedLevel) {
          showNotification('Você só pode alugar um nível por vez.', 3000);
          return;
        }
        if (balance < levels[level - 1].investment) {
          showNotification('Saldo insuficiente para alugar este nível.', 3000);
          return;
        }
        await rentLevel(level, levels[level - 1].investment);
      });
    });
  }

  // Calcular tempo restante
  function calculateRemainingTime(timestamp, duration) {
    if (!timestamp) return null;
    const start = new Date(timestamp);
    const end = new Date(start.getTime() + duration * 24 * 60 * 60 * 1000);
    const now = new Date();
    const diff = end - now;

    if (diff <= 0) {
      // Resetar nível alugado se o tempo expirou
      rentedLevel = 0;
      rentalTimestamp = 0;
      updateBalanceAndLevel();
      renderLevelCards();
      return null;
    }

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    return `${days}d ${hours}h`;
  }

  // Alugar nível
  async function rentLevel(level, investment) {
    try {
      loadingOverlay.classList.add('active');
      const newBalance = balance - investment;
      const { error } = await supabase
        .from('users')
        .update({
          balance: newBalance,
          rented_level: level,
          rental_timestamp: new Date().toISOString(),
        })
        .eq('id', user.id);
      if (error) throw error;

      balance = newBalance;
      rentedLevel = level;
      rentalTimestamp = new Date().toISOString();
      await updateBalanceAndLevel();
      await renderLevelCards();
      showNotification(`Nível ${level} alugado com sucesso!`, 2000);
    } catch (error) {
      console.error('Erro ao alugar nível:', error);
      showNotification('Erro ao alugar nível. Tente novamente.', 3000);
    } finally {
      loadingOverlay.classList.remove('active');
    }
  }

  // Creditar renda diária
  async function checkAndCreditDailyIncome() {
    if (rentedLevel === 0 || !rentalTimestamp) return;

    const levels = [
      { dailyIncome: 1000 },
      { dailyIncome: 2000 },
      { dailyIncome: 4000 },
      { dailyIncome: 8000 },
      { dailyIncome: 16000 },
      { dailyIncome: 32000 },
      { dailyIncome: 64000 },
      { dailyIncome: 128000 },
    ];
    const now = new Date();
    const lastIncome = new Date(lastIncomeTimestamp || rentalTimestamp);
    const diffTime = now - lastIncome;
    const diffDays = diffTime / (1000 * 60 * 60 * 24);

    if (diffDays >= 1) {
      const daysToCredit = Math.floor(diffDays);
      const dailyIncome = levels[rentedLevel - 1].dailyIncome;
      const totalIncome = dailyIncome * daysToCredit;

      try {
        const newBalance = balance + totalIncome;
        const { error } = await supabase
          .from('users')
          .update({
            balance: newBalance,
            last_income_timestamp: now.toISOString(),
          })
          .eq('id', user.id);
        if (error) throw error;

        balance = newBalance;
        lastIncomeTimestamp = now.toISOString();
        await updateBalanceAndLevel();
        if (totalIncome > 0) {
          showNotification(`Renda diária de ${totalIncome.toLocaleString()} Kz creditada!`, 2000);
        }
      } catch (error) {
        console.error('Erro ao creditar renda diária:', error);
        showNotification('Erro ao creditar renda diária. Tente novamente.', 3000);
      }
    }
  }

  // Salvar informações do perfil
  document.getElementById('editProfileBtn').addEventListener('click', async () => {
    const bankName = document.getElementById('bank-name').value.trim();
    const iban = document.getElementById('iban').value.trim();
    const ibanError = document.getElementById('iban-error');

    const ibanRegex = /^[0-9]{21}$/;
    if (!ibanRegex.test(iban)) {
      ibanError.classList.add('active');
      return;
    }
    ibanError.classList.remove('active');

    try {
      loadingOverlay.classList.add('active');
      const { error } = await supabase
        .from('users')
        .update({ bank_name: bankName, iban })
        .eq('id', user.id);
      if (error) throw error;

      userData.bank_name = bankName;
      userData.iban = iban;
      updateWithdrawIban();
      showNotification('Informações do perfil atualizadas com sucesso!', 2000);
    } catch (error) {
      console.error('Erro ao atualizar perfil:', error);
      showNotification('Erro ao atualizar perfil. Tente novamente.', 3000);
    } finally {
      loadingOverlay.classList.remove('active');
    }
  });

  // Manipular depósito
  document.getElementById('confirmDepositBtn').addEventListener('click', async () => {
    const amount = parseFloat(document.getElementById('deposit-amount').value);
    const paymentMethod = document.getElementById('payment-method').value;
    const proofUpload = document.getElementById('proof-upload').files[0];

    if (isNaN(amount) || amount < 5000) {
      showNotification('O valor do depósito deve ser no mínimo 5000 Kz.', 3000);
      return;
    }
    if (!paymentMethod) {
      showNotification('Por favor, selecione um método de pagamento.', 3000);
      return;
    }
    if (!proofUpload) {
      showNotification('Por favor, envie o comprovativo do depósito.', 3000);
      return;
    }

    try {
      loadingOverlay.classList.add('active');
      const { data: uploadData, error: uploadError } = await supabase.storage
        .from('proofs')
        .upload(`deposits/${user.id}/${Date.now()}_${proofUpload.name}`, proofUpload);
      if (uploadError) throw uploadError;

      const proofUrl = supabase.storage.from('proofs').getPublicUrl(uploadData.path).data.publicUrl;

      const { error } = await supabase
        .from('deposits')
        .insert({
          user_id: user.id,
          amount,
          payment_method: paymentMethod,
          proof_url: proofUrl,
          status: 'pendente',
        });
      if (error) throw error;

      showNotification('Depósito enviado com sucesso! Aguarde a aprovação.', 2000);
      document.getElementById('deposit-amount').value = '';
      document.getElementById('payment-method').value = '';
      document.getElementById('proof-upload').value = '';
      document.getElementById('proof-preview').innerHTML = '';
      document.getElementById('payment-details').classList.remove('active');
      await renderDepositHistory();
    } catch (error) {
      console.error('Erro ao realizar depósito:', error);
      showNotification('Erro ao realizar depósito. Tente novamente.', 3000);
    } finally {
      loadingOverlay.classList.remove('active');
    }
  });

  // Renderizar histórico de depósitos
  async function renderDepositHistory() {
    const historyTableBody = document.getElementById('history-table-body');
    const depositHistory = document.getElementById('deposit-history');

    try {
      const { data, error } = await supabase
        .from('deposits')
        .select('amount, created_at, status')
        .eq('user_id', user.id)
        .order('created_at', { ascending: false });
      if (error) throw error;

      if (data.length > 0) {
        depositHistory.style.display = 'block';
        historyTableBody.innerHTML = '';
        data.forEach(deposit => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${deposit.amount.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} Kz</td>
            <td>${new Date(deposit.created_at).toLocaleString('pt-BR')}</td>
            <td class="status-${deposit.status}">${deposit.status.charAt(0).toUpperCase() + deposit.status.slice(1)}</td>
          `;
          historyTableBody.appendChild(row);
        });
      } else {
        depositHistory.style.display = 'none';
      }
    } catch (error) {
      console.error('Erro ao carregar histórico de depósitos:', error);
      showNotification('Erro ao carregar histórico de depósitos. Tente novamente.', 3000);
    }
  }

  // Manipular seleção do método de pagamento
  document.getElementById('payment-method').addEventListener('change', (e) => {
    const paymentDetails = document.getElementById('payment-details');
    const paymentDetailsContent = document.getElementById('payment-details-content');
    const method = e.target.value;

    if (method === 'transferencia') {
      paymentDetailsContent.innerHTML = `
        <p><strong>*ATL:</strong> 005500006986251910141</p>
          <p>Titular: 244 924093614</p>
          <p><strong>*BAI:</strong> 00400001399134110257</p>
          <p>Titular: Jõao José</p>
          <p><strong>*BFA:</strong> 000600007136891230120</p>
          <p>Titular: João José</p>
      `;
      paymentDetails.classList.add('active');
    } else if (method === 'referencia') {
      paymentDetailsContent.innerHTML = `
        <p><strong>Entidade:</strong> 10116</p>
          <p><strong>Referência:</strong> 974116057</p>
      `;
      paymentDetails.classList.add('active');
    } else {
      paymentDetails.classList.remove('active');
    }
  });

  // Visualizar comprovativo
  document.getElementById('proof-upload').addEventListener('change', (e) => {
    const file = e.target.files[0];
    const proofPreview = document.getElementById('proof-preview');
    proofPreview.innerHTML = '';

    if (file && file.type.startsWith('image/')) {
      const img = document.createElement('img');
      img.src = URL.createObjectURL(file);
      img.alt = 'Comprovativo de depósito';
      proofPreview.appendChild(img);
    } else {
      showNotification('Por favor, selecione uma imagem válida (JPG, JPEG, PNG).', 3000);
    }
  });

  // Manipular saque
  document.getElementById('confirmWithdrawBtn').addEventListener('click', async () => {
    const amount = parseFloat(document.getElementById('withdraw-amount').value);
    const iban = document.getElementById('withdraw-iban').value.trim();
    const ibanError = document.getElementById('withdraw-iban-error');
    const ibanRegex = /^[0-9]{21}$/;

    if (isNaN(amount) || amount < 1500) {
      showNotification('O valor do saque deve ser no mínimo 1500 Kz.', 3000);
      return;
    }
    if (amount > balance) {
      showNotification('Saldo insuficiente para realizar o saque.', 3000);
      return;
    }
    if (!ibanRegex.test(iban)) {
      ibanError.classList.add('active');
      showNotification('O IBAN deve conter exatamente 21 dígitos numéricos.', 3000);
      return;
    }
    ibanError.classList.remove('active');

    try {
      loadingOverlay.classList.add('active');
      const fee = amount * 0.09;
      const netAmount = amount - fee;
      const newBalance = balance - amount;

      const { error } = await supabase
        .from('withdrawals')
        .insert({
          user_id: user.id,
          amount: netAmount,
          fee,
          status: 'pendente',
          iban,
        });
      if (error) throw error;

      const { error: balanceError } = await supabase
        .from('users')
        .update({ balance: newBalance })
        .eq('id', user.id);
      if (balanceError) throw balanceError;

      balance = newBalance;
      await updateBalanceAndLevel();
      showNotification('Saque solicitado com sucesso! Aguarde a aprovação.', 2000);
      document.getElementById('withdraw-amount').value = '';
      await renderWithdrawHistory();
    } catch (error) {
      console.error('Erro ao solicitar saque:', error);
      showNotification('Erro ao solicitar saque. Tente novamente.', 3000);
    } finally {
      loadingOverlay.classList.remove('active');
    }
  });

  // Renderizar histórico de saques
  async function renderWithdrawHistory() {
    const historyTableBody = document.getElementById('withdraw-history-table-body');
    const withdrawHistory = document.getElementById('withdraw-history');

    try {
      const { data, error } = await supabase
        .from('withdrawals')
        .select('amount, created_at, status')
        .eq('user_id', user.id)
        .order('created_at', { ascending: false });
      if (error) throw error;

      if (data.length > 0) {
        withdrawHistory.style.display = 'block';
        historyTableBody.innerHTML = '';
        data.forEach(withdrawal => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${withdrawal.amount.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} Kz</td>
            <td>${new Date(withdrawal.created_at).toLocaleString('pt-BR')}</td>
            <td class="status-${withdrawal.status}">${withdrawal.status.charAt(0).toUpperCase() + withdrawal.status.slice(1)}</td>
          `;
          historyTableBody.appendChild(row);
        });
      } else {
        withdrawHistory.style.display = 'none';
      }
    } catch (error) {
      console.error('Erro ao carregar histórico de saques:', error);
      showNotification('Erro ao carregar histórico de saques. Tente novamente.', 3000);
    }
  }

  // Modal de logout
  logoutBtn.addEventListener('click', (e) => {
    e.preventDefault();
    logoutModal.classList.add('active');
  });
  logoutConfirm.addEventListener('click', async () => {
    try {
      loadingOverlay.classList.add('active');
      const { error } = await supabase.auth.signOut();
      if (error) throw error;
      window.location.href = 'login.html';
    } catch (error) {
      console.error('Erro ao fazer logout:', error);
      showNotification('Erro ao fazer logout. Tente novamente.', 3000);
    } finally {
      loadingOverlay.classList.remove('active');
    }
  });
  logoutCancel.addEventListener('click', () => {
    logoutModal.classList.remove('active');
  });
  window.addEventListener('click', (e) => {
    if (e.target === logoutModal) {
      logoutModal.classList.remove('active');
    }
  });
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && logoutModal.classList.contains('active')) {
      logoutModal.classList.remove('active');
    }
  });

  // Inicializar a página
  await initializePage();
});
</script>
</body>
</html>